(()=>{var e={};e.id=564,e.ids=[564,888,660],e.modules={8639:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>f,default:()=>p,getServerSideProps:()=>g,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>m,routeModule:()=>C,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var o=r(7093),l=r(5244),a=r(1323),n=r(1777),i=r.n(n),c=r(6719),u=r(5453),d=e([c,u]);[c,u]=d.then?(await d)():d;let p=(0,a.l)(u,"default"),h=(0,a.l)(u,"getStaticProps"),x=(0,a.l)(u,"getStaticPaths"),g=(0,a.l)(u,"getServerSideProps"),f=(0,a.l)(u,"config"),m=(0,a.l)(u,"reportWebVitals"),j=(0,a.l)(u,"unstable_getStaticProps"),y=(0,a.l)(u,"unstable_getStaticPaths"),b=(0,a.l)(u,"unstable_getStaticParams"),v=(0,a.l)(u,"unstable_getServerProps"),S=(0,a.l)(u,"unstable_getServerSideProps"),C=new o.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/collections",pathname:"/collections",bundlePath:"",filename:""},components:{App:c.default,Document:i()},userland:u});s()}catch(e){s(e)}})},776:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>v});var o=r(997),l=r(6689),a=r(4051),n=r(5005),i=r(8695),c=r(1664),u=r.n(c),d=r(3365),p=r.n(d),h=r(1163),x=r(80),g=r(6022),f=r(9648),m=r(271),j=r.n(m),y=r(7649),b=e([f]);function v(){let[e,t]=(0,l.useState)(!1),r=(0,h.useRouter)(),s=(0,g.useSelector)(e=>e.auth.user),c=(0,g.useDispatch)();(0,l.useEffect)(()=>{let e=()=>{t(!1)};return r.events.on("routeChangeStart",e),()=>{r.events.off("routeChangeStart",e)}},[r]);let d=async()=>{try{await f.default.post("https://almsports-node-techalams-projects.vercel.app/api/auth/logout",{token:s?.accessToken}),c((0,y.av)({user:null,accessToken:null,refreshToken:null})),r.push("/login")}catch(e){j().fire({icon:"error",title:"Error",text:"Failed to logout. Please try again."}),console.error("Logout error:",e)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.Z,{className:"flex justify-content-between align-items-center px-4",style:{height:"60px",background:"linear-gradient(135deg, #43cea2, #185a9d)",color:"white"},children:[s&&o.jsx(n.Z,{variant:"light",onClick:()=>{t(!e)},style:{zIndex:100,background:"none",border:"none",width:"50px",color:"white"},children:e?o.jsx(x.rk2,{size:25}):o.jsx(p(),{})}),o.jsx("h5",{className:"p-0 m-0",style:{width:"auto"},children:"ALM SPORTS"})]}),o.jsx("div",{style:{width:e?"100%":0,height:"100%",background:"linear-gradient(135deg, #43cea2, #185a9d)",position:"fixed",top:0,left:0,overflow:"hidden",transition:"0.3s",paddingTop:"60px",fontSize:"3em",textAlign:"center",zIndex:99},children:(0,o.jsxs)(i.Z,{className:"mt-5 fs-1",children:[o.jsx(i.Z.Item,{className:"mt-3",style:{background:"none"},children:o.jsx(u(),{style:{textDecoration:"none",color:"#fff"},href:"/",children:"Dashboard"})}),o.jsx(i.Z.Item,{className:"mt-3",style:{background:"none"},children:o.jsx(u(),{style:{textDecoration:"none",color:"#fff"},href:"/collections",children:"Collections"})}),o.jsx(i.Z.Item,{className:"mt-3",style:{background:"none"},children:o.jsx(u(),{style:{textDecoration:"none",color:"#fff"},href:"/catalogues",children:"Catalogues"})}),o.jsx(i.Z.Item,{className:"mt-3",style:{background:"none"},children:o.jsx(u(),{style:{textDecoration:"none",color:"#fff"},href:"/Products",children:"Products"})}),o.jsx(i.Z.Item,{onClick:()=>d(),className:"p-4",style:{background:"none",position:"absolute",bottom:0,width:"100%"},children:o.jsx("p",{style:{textDecoration:"none",color:"#fff"},children:"Logout"})})]})})]})}f=(b.then?(await b)():b)[0],s()}catch(e){s(e)}})},6472:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>m});var o=r(997),l=r(9648),a=r(6689),n=r(1937),i=r.n(n),c=r(5226),u=r.n(c),d=r(9306),p=r.n(d),h=r(6022),x=r(271),g=r.n(x),f=e([l]);l=(f.then?(await f)():f)[0];let m=function({show:e,setShow:t,handleShow:r,handleClose:s,getAllCollections:n,selectedCollection:c,setSelectedCollection:d}){let x=(0,h.useSelector)(e=>e.auth);console.log("user",x);let[f,m]=(0,a.useState)(null),j=async e=>{try{if(e.preventDefault(),!f||""===f.trim()){console.error("Collection name is required");return}let r=await (0,l.default)("https://almsports-node-techalams-projects.vercel.app/api/collections/createCollections",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x?.accessToken}`},data:{name:f}});200===r.status?(console.log("Collection saved successfully!"),g().fire({icon:"success",title:"Success",text:"Collection saved successfully!"}),m(""),t(!1),n()):console.error("Error saving collection:",r.statusText)}catch(e){console.error("Error saving collection:",e),g().fire({icon:"error",title:"Error saving collection",text:e?.response?.data?.error||"Error saving collection!"})}},y=async e=>{try{if(e.preventDefault(),!f||""===f.trim()){console.error("Collection name is required");return}let r=await (0,l.default)("https://almsports-node-techalams-projects.vercel.app/api/collections/updateCollection",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x?.accessToken}`},data:{name:f,id:c?.id}});200===r.status?(console.log("Collection updated successfully!"),g().fire({icon:"success",title:"Success",text:"Collection updated successfully!"}),m(""),t(!1),d(null),n()):console.error("Error updating collection:",r.statusText)}catch(e){console.error("Error updating collection:",e),g().fire({icon:"error",title:"Error updating collection",text:e?.response?.data?.error||"Error updating collection!"})}};return o.jsx(o.Fragment,{children:(0,o.jsxs)(p(),{show:e||c,onHide:s,children:[o.jsx(p().Header,{closeButton:!0,children:o.jsx(p().Title,{children:"Modal heading"})}),o.jsx(p().Body,{children:(0,o.jsxs)(u(),{children:[(0,o.jsxs)(u().Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[o.jsx(u().Label,{children:"Collection ID"}),o.jsx(u().Control,{type:"number",placeholder:"Collection ID",autoFocus:!0,disabled:!0,value:c?c?.id:""})]}),(0,o.jsxs)(u().Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[o.jsx(u().Label,{children:"Collection Name"}),o.jsx(u().Control,{placeholder:"Enter Collection Name",rows:3,value:f,onChange:e=>m(e.target.value),defaultValue:c?c.name:"",required:!0})]})]})}),(0,o.jsxs)(p().Footer,{children:[o.jsx(i(),{variant:"secondary",onClick:s,children:"Close"}),o.jsx(i(),{variant:"primary",type:"submit",onClick:c?y:j,style:{background:"linear-gradient(135deg, #43cea2, #185a9d)"},children:c?"Update":"Save"})]})]})})};s()}catch(e){s(e)}})},7470:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>f});var o=r(997),l=r(6689),a=r(2154);r(5152);var n=r(6472),i=r(271),c=r.n(i),u=r(9648),d=r(6022),p=r(4051),h=r(5005),x=r(2777),g=e([n,u]);[n,u]=g.then?(await g)():g;let f=()=>{let[e,t]=(0,l.useState)(!1),[r,s]=(0,l.useState)([]),i=(0,d.useSelector)(e=>e.auth),[g,f]=(0,l.useState)(null),m=()=>t(!0),j=async()=>{try{let e=await u.default.get("https://almsports-node-techalams-projects.vercel.app/api/collections/collections",{headers:{Authorization:`Bearer ${i?.accessToken}`}});console.log("All collections:",e.data),s(e.data)}catch(e){console.error("Error fetching collections:",e),c().fire({icon:"error",title:"Error fetching collections",text:e?.response?.data?.error||"Error fetching collections!"})}};(0,l.useEffect)(()=>{j()},[]);let y=(0,l.useMemo)(()=>[{Header:"ID",accessor:"id"},{Header:"Name",accessor:"name"},{Header:"Actions",Cell:({row:e})=>(0,o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[o.jsx(x.vPQ,{style:{cursor:"pointer",color:"blue"},onClick:()=>w(e.original)}),o.jsx(x.We9,{style:{cursor:"pointer",color:"red"},onClick:()=>T(e.original.id)})]})}],[]),b=(0,l.useMemo)(()=>r,[r]),{getTableProps:v,getTableBodyProps:S,headerGroups:C,rows:P,prepareRow:k}=(0,a.useTable)({columns:y,data:b}),w=e=>{console.log("Editing:",e),f(e),m()},T=async e=>{if((await c().fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await u.default.post("https://almsports-node-techalams-projects.vercel.app/api/collections/deleteCollection",{id:e},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${i?.accessToken}`}}),c().fire("Deleted!","The collection has been removed.","success"),j()}catch(e){console.error("Delete error:",e),c().fire("Error","Could not delete collection.","error")}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(p.Z,{className:"d-flex justify-content-between align-items-center px-3",children:[o.jsx("h5",{style:{width:"auto",margin:0,padding:0},children:"Collections"}),(0,o.jsxs)(h.Z,{size:"sm",variant:"primary",onClick:m,className:"mt-2",style:{width:"35%",background:"linear-gradient(135deg, #43cea2, #185a9d)"},children:[o.jsx(x.OvN,{})," \xa0Add New"]})]}),o.jsx(n.Z,{show:e,setShow:t,handleClose:()=>{f(null),t(!1)},handleShow:m,getAllCollections:j,selectedCollection:g,setSelectedCollection:f}),o.jsx("div",{className:"mt-3",children:(0,o.jsxs)("table",{...v(),className:"table table-bordered",children:[o.jsx("thead",{className:"thead-light",children:C.map(e=>o.jsx("tr",{...e.getHeaderGroupProps(),children:e.headers.map(e=>o.jsx("th",{...e.getHeaderProps(),children:e.render("Header")}))}))}),o.jsx("tbody",{...S(),children:0===P.length?o.jsx("tr",{children:o.jsx("td",{colSpan:"3",className:"text-center",children:"No collections found"})}):P.map(e=>(k(e),o.jsx("tr",{...e.getRowProps(),children:e.cells.map(e=>o.jsx("td",{...e.getCellProps(),children:e.render("Cell")}))})))})]})})]})};s()}catch(e){s(e)}})},3841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{noSSR:function(){return n},default:function(){return i}});let s=r(167),o=r(997);r(6689);let l=s._(r(4830));function a(e){return{default:(null==e?void 0:e.default)||e}}function n(e,t){delete t.webpack,delete t.modules;let r=t.loading;return()=>(0,o.jsx)(r,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1})}function i(e,t){let r=l.default,s={loading:e=>{let{error:t,isLoading:r,pastDelay:s}=e;return null}};e instanceof Promise?s.loader=()=>e:"function"==typeof e?s.loader=e:"object"==typeof e&&(s={...s,...e});let o=(s={...s,...t}).loader;return(s.loadableGenerated&&(s={...s,...s.loadableGenerated},delete s.loadableGenerated),"boolean"!=typeof s.ssr||s.ssr)?r({...s,loader:()=>null!=o?o().then(a):Promise.resolve(a(()=>null))}):(delete s.webpack,delete s.modules,n(r,s))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6719:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>g});var o=r(997),l=r(7544),a=r.n(l);r(6764);var n=r(6022),i=r(260),c=r(776),u=r(1163),d=r(6689),p=r(1127),h=e([c]);function x({children:e}){let t=(0,u.useRouter)(),r=(0,n.useSelector)(e=>e.auth.user),s="/login"===t.pathname||"/productDetails"===t.pathname||"/viewCatalogue"===t.pathname||"/viewCatalogue"===t.pathname,o=(0,n.useSelector)(e=>e._persist?.rehydrated);return(0,d.useEffect)(()=>{console.log("isLoginPage",s),r||s?r&&"/login"===t.pathname&&t.push("/"):t.push("/login")},[r,s,t,o]),e}function g({Component:e,pageProps:t}){let r=(0,u.useRouter)(),s="/login"!==r.pathname;return o.jsx(n.Provider,{store:i.h,children:o.jsx(p.PersistGate,{loading:null,persistor:i.D,children:(0,o.jsxs)(x,{children:[s&&o.jsx(c.Z,{}),o.jsx("div",{style:{padding:"20px 10px"},children:o.jsx(e,{...t})})]})})})}c=(h.then?(await h)():h)[0],g.getInitialProps=async e=>({...await a().getInitialProps(e)}),s()}catch(e){s(e)}})},5453:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>n});var o=r(997),l=r(7470),a=e([l]);function n(){return o.jsx(o.Fragment,{children:o.jsx(l.Z,{})})}l=(a.then?(await a)():a)[0],s()}catch(e){s(e)}})},7649:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>a,av:()=>o});let s=(0,r(5184).createSlice)({name:"auth",initialState:{user:null,accessToken:null,refreshToken:null},reducers:{setUser:(e,t)=>{e.user=t.payload.user,e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken},logout:e=>{e.user=null,e.accessToken=null,e.refreshToken=null}}}),{setUser:o,logout:l}=s.actions,a=s.reducer},260:(e,t,r)=>{"use strict";r.d(t,{D:()=>u,h:()=>c});var s=r(5184),o=r(7649),l=r(4161),a=r(8936);let n={key:"auth",storage:r.n(a)()},i=(0,l.persistReducer)(n,o.ZP),c=(0,s.configureStore)({reducer:{auth:i},middleware:e=>e({serializableCheck:{ignoredActions:[l.FLUSH,l.REHYDRATE,l.PAUSE,l.PERSIST,l.PURGE,l.REGISTER]}})}),u=(0,l.persistStore)(c)},6764:()=>{},4830:(e,t,r)=>{"use strict";e.exports=r(7093).vendored.contexts.Loadable},5152:(e,t,r)=>{r(3841)},3365:e=>{"use strict";e.exports=require("@mui/icons-material/Menu")},5184:e=>{"use strict";e.exports=require("@reduxjs/toolkit")},5205:e=>{"use strict";e.exports=require("@restart/hooks/useEventCallback")},9642:e=>{"use strict";e.exports=require("@restart/ui/Button")},8180:e=>{"use strict";e.exports=require("@restart/ui/Nav")},5822:e=>{"use strict";e.exports=require("@restart/ui/NavItem")},6638:e=>{"use strict";e.exports=require("@restart/ui/SelectableContext")},9003:e=>{"use strict";e.exports=require("classnames")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},1937:e=>{"use strict";e.exports=require("react-bootstrap/Button")},5226:e=>{"use strict";e.exports=require("react-bootstrap/Form")},9306:e=>{"use strict";e.exports=require("react-bootstrap/Modal")},6405:e=>{"use strict";e.exports=require("react-dom")},6022:e=>{"use strict";e.exports=require("react-redux")},2154:e=>{"use strict";e.exports=require("react-table")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4161:e=>{"use strict";e.exports=require("redux-persist")},1127:e=>{"use strict";e.exports=require("redux-persist/integration/react")},8936:e=>{"use strict";e.exports=require("redux-persist/lib/storage")},271:e=>{"use strict";e.exports=require("sweetalert2")},3372:e=>{"use strict";e.exports=require("uncontrollable")},5548:e=>{"use strict";e.exports=require("warning")},9648:e=>{"use strict";e.exports=import("axios")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[255,742,777,815],()=>r(8639));module.exports=s})();