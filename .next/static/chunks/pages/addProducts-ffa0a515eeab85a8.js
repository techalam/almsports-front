(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{439:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/addProducts",function(){return r(8506)}])},8506:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(5893),o=r(7294),n=r(7066),a=r(5005),c=r(2529),i=r(3967),l=r.n(i),d=r(6792);let u=o.forwardRef(({bsPrefix:e,className:t,striped:r,bordered:o,borderless:n,hover:a,size:c,variant:i,responsive:u,...h},p)=>{let v=(0,d.vE)(e,"table"),x=l()(t,v,i&&`${v}-${i}`,c&&`${v}-${c}`,r&&`${v}-${"string"==typeof r?`striped-${r}`:"striped"}`,o&&`${v}-bordered`,n&&`${v}-borderless`,a&&`${v}-hover`),f=(0,s.jsx)("table",{...h,className:x,ref:p});if(u){let e=`${v}-responsive`;return"string"==typeof u&&(e=`${e}-${u}`),(0,s.jsx)("div",{className:e,children:f})}return f});var h=r(9473),p=r(6455),v=r.n(p),x=r(2777),f=r(1163),j=function(e){let{selectedCollection:t}=e,r=(0,h.v9)(e=>e.auth),[i,l]=(0,o.useState)([]),[d,p]=(0,o.useState)([]),[j,g]=(0,o.useState)(1),[m]=(0,o.useState)(10),[y,C]=(0,o.useState)(""),[b,k]=(0,o.useState)(0),w=(0,f.useRouter)(),N=async()=>{try{let e=await n.Z.get("https://almsports-node-techalams-projects.vercel.app/api/products/products?category=",{headers:{Authorization:"Bearer ".concat(null==r?void 0:r.accessToken)},params:{limit:m,offset:(j-1)*m,name:y}});l(e.data),k(e.headers["x-total-count"])}catch(r){var e,t;console.error("Error fetching products:",r),v().fire({icon:"error",title:"Error fetching products",text:(null==r?void 0:null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Error fetching products!"})}};(0,o.useEffect)(()=>{N()},[t,j,y]);let $=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},E=async()=>{if(!d.length){v().fire("Validation","Please select at least one product.","warning");return}try{let e=await n.Z.post("https://almsports-node-techalams-projects.vercel.app/api/catalouges/addProductToCatalouge",{id:t,productIds:d},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==r?void 0:r.accessToken)}});200===e.status&&(v().fire("Success","Products added to catalouge successfully!","success"),p([]),N())}catch(t){var e,s;console.error("Error saving products:",t),v().fire({icon:"error",title:"Error saving products",text:(null==t?void 0:null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Could not save products to catalouge."})}};return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)(a.Z,{size:"sm",className:"mb-2",onClick:()=>{var e;return w.push("/viewCatalogue?id=".concat(null==w?void 0:null===(e=w.query)||void 0===e?void 0:e.selectedCollection))},children:[(0,s.jsx)(x.rDJ,{})," View Catalogue"]}),(0,s.jsx)("h3",{children:"Add Products to Catalouge"}),(0,s.jsx)(c.Z.Control,{type:"text",placeholder:"Search products by name",value:y,onChange:e=>C(e.target.value),className:"my-3"}),(0,s.jsxs)(u,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Select"}),(0,s.jsx)("th",{children:"Product Name"}),(0,s.jsx)("th",{children:"Category"}),(0,s.jsx)("th",{children:"Price"})]})}),(0,s.jsx)("tbody",{children:i.length>0?i.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(c.Z.Check,{type:"checkbox",checked:d.includes(e.id),onChange:()=>$(e.id)})}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.category}),(0,s.jsx)("td",{children:e.price})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",children:"No products found."})})})]}),(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,s.jsx)(a.Z,{variant:"primary",onClick:E,disabled:0===d.length,children:"Save Selected Products"}),(0,s.jsxs)("div",{children:["Page:"," ",(0,s.jsx)(a.Z,{variant:"light",disabled:1===j,onClick:()=>g(e=>e-1),children:"<"})," ",j," ",(0,s.jsx)(a.Z,{variant:"light",disabled:j*m>=b,onClick:()=>g(e=>e+1),children:">"})]})]})]})};function g(){let{selectedCollection:e}=(0,f.useRouter)().query;return(0,s.jsx)(j,{selectedCollection:e})}}},function(e){e.O(0,[529,777,888,774,179],function(){return e(e.s=439)}),_N_E=e.O()}]);