(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[168],{3485:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(7294),o=a(6852);let n=2147483648-1;function s(){let e=function(){let e=(0,r.useRef)(!0),t=(0,r.useRef)(()=>e.current);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}(),t=(0,r.useRef)();return(0,o.Z)(()=>clearTimeout(t.current)),(0,r.useMemo)(()=>{let a=()=>clearTimeout(t.current);return{set:function(r,o=0){e()&&(a(),o<=n?t.current=setTimeout(r,o):function e(t,a,r){let o=r-Date.now();t.current=o<=n?setTimeout(a,o):setTimeout(()=>e(t,a,r),n)}(t,r,Date.now()+o))},clear:a,handleRef:t}},[])}},8122:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalogues",function(){return a(6826)}])},6826:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var r=a(5893),o=a(7294),n=a(9521),s=a(6455),l=a.n(s),i=a(7066),c=a(9473),d=a(4051),u=a(5005),p=a(2777),h=a(2529),m=a(4162),g=function(e){let{show:t,handleClose:a,getAllCatalouges:n,selectedCatalouge:s,setSelectedCatalouge:d}=e,p=(0,c.v9)(e=>e.auth),[g,f]=(0,o.useState)("");(0,o.useEffect)(()=>{s?f(s.name):f("")},[s]);let v=async e=>{if(e.preventDefault(),!g||""===g.trim()){l().fire("Validation Error","Catalouge name is required","warning");return}try{let e=await i.Z.post("https://almsports-node-techalams-projects.vercel.app/api/catalouges/createCatalouge",{name:g},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==p?void 0:p.accessToken)}});200===e.status&&(l().fire("Success","Catalouge created successfully!","success"),f(""),a(),n())}catch(e){var t,r;console.error("Error saving catalouge:",e),l().fire("Error",(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Could not save catalouge","error")}},x=async e=>{if(e.preventDefault(),!g||""===g.trim()){l().fire("Validation Error","Catalouge name is required","warning");return}try{let e=await i.Z.put("https://almsports-node-techalams-projects.vercel.app/api/catalouges/updateCatalouge",{id:null==s?void 0:s.id,name:g},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==p?void 0:p.accessToken)}});200===e.status&&(l().fire("Success","Catalouge updated successfully!","success"),f(""),a(),d(null),n())}catch(e){var t,r;console.error("Error updating catalouge:",e),l().fire("Error",(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Could not update catalouge","error")}};return(0,r.jsxs)(m.Z,{show:t,onHide:a,children:[(0,r.jsx)(m.Z.Header,{closeButton:!0,children:(0,r.jsx)(m.Z.Title,{children:s?"Edit Catalouge":"Add Catalouge"})}),(0,r.jsx)(m.Z.Body,{children:(0,r.jsxs)(h.Z,{onSubmit:s?x:v,children:[(0,r.jsxs)(h.Z.Group,{className:"mb-3",controlId:"catalougeId",children:[(0,r.jsx)(h.Z.Label,{children:"ID"}),(0,r.jsx)(h.Z.Control,{type:"text",value:s?s.id:"",disabled:!0,placeholder:"Auto-generated"})]}),(0,r.jsxs)(h.Z.Group,{className:"mb-3",controlId:"catalougeName",children:[(0,r.jsx)(h.Z.Label,{children:"Catalouge Name"}),(0,r.jsx)(h.Z.Control,{type:"text",placeholder:"Enter catalouge name",value:g,onChange:e=>f(e.target.value),required:!0})]})]})}),(0,r.jsxs)(m.Z.Footer,{children:[(0,r.jsx)(u.Z,{variant:"secondary",onClick:a,children:"Close"}),(0,r.jsx)(u.Z,{variant:"primary",type:"submit",onClick:s?x:v,style:{background:"linear-gradient(135deg, #43cea2, #185a9d)",border:"none"},children:s?"Update":"Save"})]})]})},f=a(1163),v=a(3967),x=a.n(v),C=a(6792);let j={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},y=o.forwardRef(({bsPrefix:e,position:t,containerPosition:a,className:o,as:n="div",...s},l)=>(e=(0,C.vE)(e,"toast-container"),(0,r.jsx)(n,{ref:l,...s,className:x()(e,t&&j[t],a&&`position-${a}`,o)})));y.displayName="ToastContainer";var b=a(3485),w=a(8662),E=a(1068);let N={[w.d0]:"showing",[w.Ix]:"showing show"},Z=o.forwardRef((e,t)=>(0,r.jsx)(E.Z,{...e,ref:t,transitionClasses:N}));Z.displayName="ToastFade";var T=Z,k=a(8146),B=a(1485);let R=o.createContext({onClose(){}}),S=o.forwardRef(({bsPrefix:e,closeLabel:t="Close",closeVariant:a,closeButton:n=!0,className:s,children:l,...i},c)=>{e=(0,C.vE)(e,"toast-header");let d=(0,o.useContext)(R),u=(0,k.Z)(e=>{null==d||null==d.onClose||d.onClose(e)});return(0,r.jsxs)("div",{ref:c,...i,className:x()(e,s),children:[l,n&&(0,r.jsx)(B.Z,{"aria-label":t,variant:a,onClick:u,"data-dismiss":"toast"})]})});S.displayName="ToastHeader";let _=o.forwardRef(({className:e,bsPrefix:t,as:a="div",...o},n)=>(t=(0,C.vE)(t,"toast-body"),(0,r.jsx)(a,{ref:n,className:x()(e,t),...o})));_.displayName="ToastBody";let A=o.forwardRef(({bsPrefix:e,className:t,transition:a=T,show:n=!0,animation:s=!0,delay:l=5e3,autohide:i=!1,onClose:c,onEntered:d,onExit:u,onExiting:p,onEnter:h,onEntering:m,onExited:g,bg:f,...v},j)=>{e=(0,C.vE)(e,"toast");let y=(0,o.useRef)(l),w=(0,o.useRef)(c);(0,o.useEffect)(()=>{y.current=l,w.current=c},[l,c]);let E=(0,b.Z)(),N=!!(i&&n),Z=(0,o.useCallback)(()=>{N&&(null==w.current||w.current())},[N]);(0,o.useEffect)(()=>{E.set(Z,y.current)},[E,Z]);let k=(0,o.useMemo)(()=>({onClose:c}),[c]),B=!!(a&&s),S=(0,r.jsx)("div",{...v,ref:j,className:x()(e,t,f&&`bg-${f}`,!B&&(n?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,r.jsx)(R.Provider,{value:k,children:B&&a?(0,r.jsx)(a,{in:n,onEnter:h,onEntering:m,onEntered:d,onExit:u,onExiting:p,onExited:g,unmountOnExit:!0,children:S}):S})});A.displayName="Toast";var H=Object.assign(A,{Body:_,Header:S}),P=()=>{let[e,t]=(0,o.useState)(!1),[a,s]=(0,o.useState)([]),[h,m]=(0,o.useState)(null),[v,x]=(0,o.useState)(!1),C=(0,c.v9)(e=>e.auth),j=(0,f.useRouter)(),b=()=>t(!0),w=async()=>{try{let e=await i.Z.get("https://almsports-node-techalams-projects.vercel.app/api/catalouges/catalouges",{headers:{Authorization:"Bearer ".concat(null==C?void 0:C.accessToken)}});s(e.data)}catch(e){console.error("Error fetching catalouges:",e),l().fire("Error","Could not fetch catalouges","error")}};(0,o.useEffect)(()=>{w()},[]);let E=e=>{m(e),b()},N=async e=>{if((await l().fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await i.Z.post("https://almsports-node-techalams-projects.vercel.app/api/catalouges/deleteCatalouge",{id:e},{headers:{Authorization:"Bearer ".concat(null==C?void 0:C.accessToken),"Content-Type":"application/json"}}),l().fire("Deleted!","Catalouge has been removed.","success"),w()}catch(e){console.error("Error deleting catalouge:",e),l().fire("Error","Could not delete catalouge","error")}},Z=e=>{let t="http://localhost:3000/viewCatalogue?id=".concat(e);if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(t).then(()=>x(!0)).catch(()=>alert("Failed to copy"));else{let e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),x(!0)}catch(e){alert("Failed to copy")}document.body.removeChild(e)}},T=(0,o.useMemo)(()=>[{Header:"ID",accessor:"id"},{Header:"Name",accessor:"name"},{Header:"Actions",Cell:e=>{let{row:t}=e;return(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,r.jsx)(p.rDJ,{style:{cursor:"pointer",color:"blue"},onClick:()=>{var e;return j.push("addProducts?selectedCollection=".concat(null==t?void 0:null===(e=t.original)||void 0===e?void 0:e.id))}}),(0,r.jsx)(p.vPQ,{style:{cursor:"pointer",color:"blue"},onClick:()=>E(null==t?void 0:t.original)}),(0,r.jsx)(p.We9,{style:{cursor:"pointer",color:"red"},onClick:()=>{var e;return N(null==t?void 0:null===(e=t.original)||void 0===e?void 0:e.id)}}),(0,r.jsx)(p.C3L,{style:{cursor:"pointer",color:"green"},onClick:()=>{var e;return Z(null==t?void 0:null===(e=t.original)||void 0===e?void 0:e.id)}})]})}}],[]),k=(0,o.useMemo)(()=>a,[a]),{getTableProps:B,getTableBodyProps:R,headerGroups:S,rows:_,prepareRow:A}=(0,n.useTable)({columns:T,data:k});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{position:"top-end",className:"p-3",children:(0,r.jsx)(H,{bg:"success",show:v,onClose:()=>x(!1),delay:1500,autohide:!0,children:(0,r.jsx)(H.Body,{className:"text-white",children:"Copied!"})})}),(0,r.jsxs)(d.Z,{className:"d-flex justify-content-between align-items-center px-3",children:[(0,r.jsx)("h5",{style:{width:"auto",margin:0},children:"Catalouges"}),(0,r.jsxs)(u.Z,{size:"sm",variant:"primary",onClick:b,className:"mt-2",style:{width:"35%",background:"linear-gradient(135deg, #43cea2, #185a9d)"},children:[(0,r.jsx)(p.OvN,{})," \xa0Add New"]})]}),(0,r.jsx)(g,{show:e,handleClose:()=>{m(null),t(!1)},getAllCatalouges:w,selectedCatalouge:h,setSelectedCatalouge:m}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsxs)("table",{...B(),className:"table table-bordered",children:[(0,r.jsx)("thead",{className:"thead-light",children:S.map(e=>(0,r.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map(e=>(0,r.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")}))}))}),(0,r.jsx)("tbody",{...R(),children:0===_.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"3",className:"text-center",children:"No catalouges found"})}):_.map(e=>(A(e),(0,r.jsx)("tr",{...e.getRowProps(),children:e.cells.map(e=>(0,r.jsx)("td",{...e.getCellProps(),children:e.render("Cell")}))})))})]})})]})};function D(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(P,{})})}}},function(e){e.O(0,[529,251,777,162,521,888,774,179],function(){return e(e.s=8122)}),_N_E=e.O()}]);